paths:
  /camera/list/:
    get:
      tags:
        - camera
      summary: list all video devices, including unsupported devices
  /camera/list/supported:
    get:
      tags:
        - camera
      summary: list supported camera devices
      description: list v4l2 devices that are cameras supporting video capture. This should be used to present camera selection UI to user in video configuration
      responses:
        200:
          description: success, a list of the supported cameras, and their attributes
          content:
            application/json:
              properties:
                cameras:
                  type: array
                  items:
                    type: object
                    schema:
                      $ref: "#/components/schemas/cameraInformation"
  /camera/{id}/formats:
    get:
      tags:
        - camera
      summary: get a list of supported formats for a camera
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cameraFormats"
        500:
          description: error
  /camera/{id}/format:
    get:
      tags:
        - camera
      summary: get the current camera format
      produces:
        - "application/vnd.cameraFormat+json"
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cameraFormat"
      schemes: http
    put:
      tags:
        - camera
      summary: set the camera format
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cameraFormat"
  /camera/{id}/controls:
    get:
      tags:
        - camera
      summary: get camera available controls, and their current values
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cameraControls"
        500:
          description: error
  /camera/{id}/control/{control}:
    get:
      tags:
        - camera
      summary: get a camera control
      produces:
        - application/vnd.cameraControl+json
      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cameraControl"
    put:
      tags:
        - camera
      summary: set a camera control
      operationId: 
      responses:
        200:
          description: successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cameraControl"
        500:
          description: Error setting control
          content:
            application/json:
              properties:
                error:
                  type: string
                  description: error message
                  example: out of range, invalid control

components:
  schemas:
    cameraInfomation:
      type: object
      properties:
        id:
          type: integer
        description:
          type: string
          example: HD Pro Webcam C920
        bus:
          type: string
          example: usb-0000:34:00.3-3.1.4
        path:
          type: string
          example: /dev/cam/0
        capabilities:
          type: integer
          example: 4096
    pixelFormat:
      type: object
      properties:
        fourcc:
          type: string
          example: 'H264'
    frameSize:
      type: object
      properties:
        width:
          type: integer
          example: 1920
        height:
          type: integer
          example: 1080
    frameInterval:
      type: object
      properties:
        numerator:
          type: integer
        denominator:
          type: integer
    cameraFormat:
      title: "Mediatype identifier: application/vnd.cameraFormat+json; view=default"
      description: a specific camera format specifying encoding (pixformat), frame size, and frame interval
      type: object
      properties:
        pixelFormat:
          type: object
          schema:
            $ref: "#/components/schemas/pixelFormat"
        frameSize:
          type: object
          schema:
            $ref: "#/components/schemas/frameSize"
        frameInterval:
          type: object
          schema:
            $ref: "#/components/schemas/frameInterval"
    cameraFormats:
      type: array
      items:
        type: object
        schema:
          $ref: "#/components/schemas/cameraFormat"
    cameraControl:
      title: "Mediatype identifier: application/vnd.cameraControl+json; view=default"
      type: object
      properties:
        index:
          type: integer
        id:
          type: integer
        value:
          type: integer
        default:
          type: integer
        min:
          type: integer
        max:
          type: integer
        type:
          type: integer
        menu:
          type: object
    cameraControls:
      type: array
      items:
        type: object
        schema:
          $ref: "#/components/schemas/cameraControl"
